<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>サンプルデモ</title>
    <style>
      body{
        background-color:yellow;
        text-align:center;
      }
      #recomend{
        margin:50px;
      }
      .container{
        display:flex;
      }
      .list{
        width:40vw;
        margin:0 auto;
      }
      ul{
        list-style:none;
      }

    </style>
  </head>
  <body>

    <div id='recomend'>
      <h1>おすすめ動画</h1>
      <div id="slide">
      </div>
        <button id="rev"><<</button>
        <button id="next">>></button>
    </div>
    <input id="keyword" type="text" value="霜降り明星"/>
    <button id="search">検索</button>

    <div class="container">
      <div class="list">
          <h2>新着動画</h2>
          <ul id="new"></ul>
      </div>
      <div class="list">
          <h2>ランダム動画</h2>
          <ul id="random"></ul>
      </div>
    </div>
        
     
      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
    const slideVideoId = ['B5Kob4WlNQI', 'eQbzLq1zp6E', 'JraE8sjcEcI','U4NHBdYINt4']; 
    console.log(slideVideoId);
    let counter = 0;
    let index = 0;

    $('#slide').append('<iframe width="560" height="315" src="https://www.youtube.com/embed/'+slideVideoId[index]+'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>')
 
    $('#next').click(()=>{
      
      index = ++counter % slideVideoId.length;
      $('#slide').empty();
      $('#slide').append('<iframe width="560" height="315" src="https://www.youtube.com/embed/'+slideVideoId[index]+'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>')
    });
    
    $('#rev').click(()=>{
      index = --counter % slideVideoId.length;
      $('#slide').empty();
      $('#slide').append('<iframe width="560" height="315" src="https://www.youtube.com/embed/'+slideVideoId[index]+'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>')

    })
    

     const url = 'https://www.googleapis.com/youtube/v3/search?key=AIzaSyBUuQLq9zA0OJNn9ublXfXkJePZyCh71n8&maxResults=20&type=video&part=snippet&q=';

    $('#search').on('click', () => {
      $.ajax({
        url:url + $('#keyword').val(),
        dataType:"json",
      }).done(data => {

        console.log(data.items);

        $('#new').empty('');
        $('#random').empty('');
        
       
        for(let i=0;i<5;i++){
          console.log(data.items[i].snippet.thumbnails.medium.url);
          $('#new').append('<img src="'+ data.items[i].snippet.thumbnails.medium.url+'"></img>');
          $('#new').append('<li><a href="https://www.youtube.com/watch?v=' +data.items[i].id.videoId+'">'+ data.items[i].snippet.description+'</a></li>');
        }
       
       const makeRandom =()=>{
         const rnd = Math.floor(Math.random()*data.items.length);
         $('#random').append('<img src="'+ data.items[rnd].snippet.thumbnails.medium.url+'"></img>');
         $('#random').append('<li><a href="https://www.youtube.com/watch?v=' +data.items[rnd].id.videoId+'">'+ data.items[rnd].snippet.description+'</a></li>');
         }
        
        for(let a=0;a<5;a++){
          makeRandom(a);
        }
        
        })
      })

    
    </script>
  </body>
</html>